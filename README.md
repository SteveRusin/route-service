# Route Service

## Project installation instructions

1. Clone the project
1. Switch to node v18
1. Run `npm ci` command to install dependencies
1. Copy and rename `.env.example` -> `.env`; Content of `.env.example` should work for local environment setup
1. Run `npm run start:dev` to serve application

## Npm scripts

- `npm run start:dev` - starts local env targeting local backend
- `npm run build` - builds into dist folder with production configuration
- `npm run test:ci` - run linter and tests. Used by ci environment
- `npm run build:ci` - build artifacts. Used by ci environment
- `npm run lint` - lint the project using eslint, stylelint and find circular imports
- `npm run lint:eslint` - run eslint
- `npm run lint:styles` - run stylelint
- `npm run find-circular-imports` - find circular imports in project
- `npm run test:dev` - run tests in watch mode
- `npm run test` - run test once using chrome headless,
- `npm run s3:push` - pushes dist folder to s3

- `npm run build` - builds into dist folder
- `npm run start` - starts application from dist folder
- `npm run test:ci` - run linter and tests. Used by ci environment
- `npm run build:ci` - build artifacts. Used by ci environment
- `npm run start:dev` - starts application in watch mode for development
- `npm run lint:eslint` - run eslint
- `npm run lint` - lint the project using eslint and find circular imports
- `npm run test` - run unit tests
- `npm run find-circular-imports` - find circular imports in project
- `npm run test:integration` - starts integration tests. Uses `.env.integration` configuration
- `npm run compose:test:integration` - runs docker compose for integration tests. Uses `docker-compose.int.yml` file
- `npm run typeorm:cli` - configures typeorm cli. Expected to be used in combination with other command.
- `npm run migration:create` - creates new migration. E.g `npm run migration:create ./src/migrations/{name_of_migration}`
- `npm run migration:run` - runs migrations defined in `src/migrations`


## Project source code structure:

- src/config - application configurations files
- src/controllers - application controllers
- src/entities - typeorm database entities
- src/infrastructure - folder for interaction with infrastructure. Contains repositories, api clients etc
- src/mappers - mapper files win format `{model}-to-{model}.mapper.ts`
- src/migrations - folder containing database migration generated by `npm run migration:create` command
- src/models - interfaces/models used in the application
- src/services - folder containing business application business logic
- tests/features - integration tests scenarios
- tests/mocks - factory functions for mocks
- tests/utils - tests related helper functions
